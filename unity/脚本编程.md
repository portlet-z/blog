### 脚本

- 脚本Script用于驱动游戏逻辑

- 添加一个脚本
  
  - 右键，Create -> C# Script
  
  - 文件名必须规范，文件名即为类名。如SimpleLogic

- 双击在VS中打开脚本，检查类名与文件名是否一致

- 在VS中编辑代码，添加一行打印输出。其中Debug是Unity API中的一个工具类

```cs
void Start() {
    Debug.Log("Start");
}
```

- CTRL+S,保存代码

- 编译：编译过程是自动的。保存脚本，回到Unity时会自动重新编译

- 挂载脚本：两种办法
  
  - 点Add Component,选Scripts -> SimpleLogic
  
  - 或者直接将脚本拖到Inspector窗口的最下方

- 运行游戏
  
  - 点Play按钮，运行游戏
  
  - 在Console窗口周，观察输出
  
  - 若Console窗口未显示，则Window -> General -> Console调出此窗口
  
  - 停止游戏

- 注意：
  
  - C#文件名必须和类名一致，否则无法挂载。若要修改类名，应在VS中右键重命名
  
  - 脚本必须挂载到物体上，才会被调用



### 当前物体

- 在SimpleLogic.cs中，获取当前物体

- this当前脚本组件

- this.gameObject 当前物体

- this.gameObject.name 当前物体的名字

- this.gameObject.transform 当前物体下的Transform组件。为了简化书写，也可写作this.transform

- API中的大部分类型，来自于UnityEngine. using UnityEngine;

- 基类 MonoBehavior

- 游戏物体GameObject

- 变换组件 Transform

- 三维向量 Vector3



### 物体的坐标

- transform.position 世界坐标

- transform.localPosition 本地坐标

- 一般常使用的是localPosition,与Inspector中的值一致

- Vector3类型，即三维向量，含xyz三个分量(float).设置物体的坐标：this.transform.localPosition = new Vectors(1.5f, 0, 2.0f);



### 播发模式

- Edit Mode,编辑模式

- Play Mode,播发、运行模式

- 在播发模式下，
  
  - 实时显示场景中的物体和属性
  
  - 游戏中的状态不可保存You must exit play mode to save the scene



### 帧更新

- Frame,一个游戏帧；FrameRate, 帧率、刷新率；FPS, Frames Per Second,每秒更新多少帧

- Update(),称为帧更新，此方法会被游戏引擎定时调用，以更新游戏的状态

- 帧率观察：Time.time,游戏时间；Time.deltaTime,距上次更新的时间差

- 显然，帧率是不固定的，Unity会尽快地更新

- Unity不支持固定帧率，但可以设定一个近似帧率:Application.targetFrameRate = 60;其中，指示Unity尽量以FPS = 60的帧率更新游戏

- 在Update()中，移动物体的位置
  
  - Vector3 pos = this.transform.localPosition;
  
  - pos.x += 0.01f;
  
  - this.transform.localPostion = pos;
  
  - 运行游戏则物体沿X轴正向移动

- 物体的运动并不是匀速的。每次运动0.01米，但是间隔的deltaTime不固定

- 使用deltaTime让物体匀速运动
  
  - float speed = 3;
  
  - float distance = speed * Time.deltaTime;



### 物体的运动

- 一般使用transform.Translate()实现相对运动

- transform.Translate(dx, dy, dz, ...),其中dx, dy, dz是坐标增量

- transform.Translate(0, 0, distance); //Z轴方向增加distance

- transform.Translate(dx, dy, dz, space):其中第四个参数：Space.World相对于世界坐标系， Space.Self,相对于自身坐标系(本地坐标系)

- 目标沿物体红旗方向前进
  
  - 获取目标物体 GameObject flag = GameObject.Find("红旗");
  
  - 转向目标 this.transform.LookAt(flag.transform); 使物体的Z轴指向物体
  
  - 向前运动，forward + Z轴方向 this.transform.Translate(0, 0, dz, Space.Self); 沿物体自身坐标系的轴向运动


